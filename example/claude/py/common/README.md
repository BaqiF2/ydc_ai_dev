## 流式输入
https://platform.claude.com/docs/zh-CN/agent-sdk/streaming-vs-single-mode
Claude Agent SDK 支持两种不同的输入模式来与代理交互：

## 流式输入模式的典型场景

**等价**：进入终端进行多轮对话

**交互式开发任务** (推荐使用)
- 代码审查和重构 - 需要多轮对话,讨论不同的优化方案
- 架构设计咨询 - 上传架构图,持续讨论和改进设计
- 调试会话 - 逐步分析问题,查看日志,测试修复方案
- 代码生成与迭代 - 生成代码后根据反馈持续优化

**复杂项目分析**
- 安全审计 - 需要访问多个文件,使用 Read/Grep 工具深度分析
- 代码库重构 - 持续的文件读写操作,保持文件系统状态
- 技术债务评估 - 多轮探索式分析

**需要视觉输入的场景**
- UI/UX 审查 - 上传界面截图或设计稿
- 错误诊断 - 上传错误截图或图表
- 文档生成 - 基于图表或流程图生成文档

## 单消息输入模式的典型场景

**等价**：claude -p "prompt"

**快速查询任务**
- 代码片段解释 - 一次性解释某个函数或算法
- 语法检查 - 快速验证代码正确性
- 文档查询 - 查找特定 API 用法说明

**无状态/自动化环境**
- CI/CD 管道集成 - 在 GitHub Actions 或其他 CI 中运行
- Lambda/Serverless 函数 - 无状态的代码审查或分析
- 批处理任务 - 对多个文件进行独立的一次性分析
- Webhook 响应 - 响应代码提交事件进行快速检查

**简单的一次性操作**
- 格式化代码
- 生成测试用例
- 提取代码注释
- 简单的语法转换

## 选择建议

```
使用流式输入 ← → 使用单消息输入
─────────────────────────────────────────
需要上下文持久性              单次独立查询
需要工具集成                  不需要工具
需要图像上传                  纯文本输入
交互式会话                    自动化脚本
复杂多步骤任务                简单快速任务
需要中断/取消能力             运行到完成
```

**关键区别**: 如果你在 Claude Code 中需要"对话式编程"体验,使用流式输入;如果只是需要"快速获取答案",使用单消息输入。