"""
ReActæ”¹è¿›ç‰ˆæœ¬æ¼”ç¤º
å¯¹æ¯”å±•ç¤ºåŸå§‹ç‰ˆæœ¬å’Œæ”¹è¿›ç‰ˆæœ¬çš„åŒºåˆ«
"""
import sys
import os
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))

from simple_react import SimpleReAct
from improved_react import ReActAgent
from chat_models import openai_tongyi_chat_model


def compare_versions():
    """å¯¹æ¯”ä¸¤ä¸ªç‰ˆæœ¬çš„ReActå®ç°"""
    print("=" * 80)
    print("ReActå®ç°æ”¹è¿›å¯¹æ¯”æ¼”ç¤º")
    print("=" * 80)

    # åˆå§‹åŒ–LLM
    llm = openai_tongyi_chat_model()

    # åˆ›å»ºä¸¤ä¸ªç‰ˆæœ¬çš„å®ä¾‹
    simple_react = SimpleReAct(llm)
    improved_react = ReActAgent(llm)

    # æµ‹è¯•é—®é¢˜
    test_questions = [
        "æˆ‘æœ‰10000å…ƒï¼Œé»„é‡‘450å…ƒä¸€å…‹ï¼Œèƒ½ä¹°å¤šå°‘å…‹ï¼Ÿ",
        "5000å…ƒä¹°è‚¡ç¥¨ï¼Œ25å…ƒä¸€è‚¡ï¼Œèƒ½ä¹°å¤šå°‘è‚¡ï¼Ÿ",
        "å½“å‰ç¾å…ƒå…‘äººæ°‘å¸æ±‡ç‡æ˜¯å¤šå°‘ï¼Ÿ"
    ]

    for i, question in enumerate(test_questions, 1):
        print(f"\næµ‹è¯•é—®é¢˜ {i}: {question}")
        print("-" * 60)

        print("\nğŸ” ç®€åŒ–ç‰ˆæœ¬æ‰§è¡Œè¿‡ç¨‹:")
        simple_answer = simple_react.run(question)
        print(f"ç®€åŒ–ç‰ˆæœ¬ç­”æ¡ˆ: {simple_answer}")

        print(f"\nğŸš€ æ”¹è¿›ç‰ˆæœ¬æ‰§è¡Œè¿‡ç¨‹:")
        improved_answer = improved_react.process_question(question)
        print(f"æ”¹è¿›ç‰ˆæœ¬ç­”æ¡ˆ: {improved_answer}")

        print("\n" + "=" * 60)


def show_improvements():
    """å±•ç¤ºä¸»è¦æ”¹è¿›ç‚¹"""
    print("\nğŸ“Š ReActå®ç°ä¸»è¦æ”¹è¿›ç‚¹:")
    print("=" * 50)

    improvements = [
        "âœ… æç¤ºè¯å·¥ç¨‹ä¼˜åŒ– - æ›´è¯¦ç»†çš„è§’è‰²å®šä¹‰å’Œæ ¼å¼æŒ‡å¯¼",
        "âœ… æ¨¡å—åŒ–æ¶æ„è®¾è®¡ - ToolExecutorã€ReActParserã€ReActAgentåˆ†ç¦»",
        "âœ… å¢å¼ºçš„é”™è¯¯å¤„ç† - è¾“å…¥éªŒè¯ã€å¼‚å¸¸æ•è·ã€å®‰å…¨æœºåˆ¶",
        "âœ… æ—¥å¿—è®°å½•ç³»ç»Ÿ - è¯¦ç»†çš„æ‰§è¡Œè¿‡ç¨‹è·Ÿè¸ª",
        "âœ… ç±»å‹å®‰å…¨ - ä½¿ç”¨æšä¸¾å’Œæ•°æ®ç±»",
        "âœ… æ›´å¥½çš„å“åº”è§£æ - æ”¯æŒå¤šç§æ ¼å¼å’Œè¾¹ç•Œæƒ…å†µ",
        "âœ… å¯¹è¯å†å²ç®¡ç† - ä¿å­˜å®Œæ•´çš„äº¤äº’è®°å½•",
        "âœ… å·¥å…·å‡½æ•°å¢å¼º - æ›´æ™ºèƒ½çš„æœç´¢å’Œè®¡ç®—",
        "âœ… ä»£ç å¯è¯»æ€§ - æ¸…æ™°çš„å‘½åå’Œæ³¨é‡Š",
        "âœ… æ‰©å±•æ€§ - æ˜“äºæ·»åŠ æ–°å·¥å…·å’Œç‰¹æ€§"
    ]

    for improvement in improvements:
        print(f"  {improvement}")


def architecture_comparison():
    """æ¶æ„å¯¹æ¯”"""
    print("\nğŸ—ï¸ æ¶æ„å¯¹æ¯”:")
    print("=" * 50)

    print("åŸå§‹ç‰ˆæœ¬æ¶æ„:")
    print("""
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç”¨æˆ·é—®é¢˜       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç®€å•æç¤ºè¯     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   LLMè°ƒç”¨       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ç®€å•è§£æ       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   å·¥å…·æ‰§è¡Œ       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   å¾ªç¯åˆ¤æ–­       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """)

    print("\næ”¹è¿›ç‰ˆæœ¬æ¶æ„:")
    print("""
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    ç”¨æˆ·é—®é¢˜                              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                ReActAgent (æ™ºèƒ½ä½“æ ¸å¿ƒ)                    â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              æ”¹è¿›ç‰ˆæç¤ºè¯ç³»ç»Ÿ                        â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                       â”‚                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚              ReActParser (å“åº”è§£æå™¨)               â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
    â”‚  â”‚  â”‚ æ€è€ƒæå–    â”‚ â”‚ åŠ¨ä½œè§£æ    â”‚ â”‚ ç­”æ¡ˆæå–    â”‚ â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                       â”‚                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚            ToolExecutor (å·¥å…·æ‰§è¡Œå™¨)                â”‚  â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
    â”‚  â”‚  â”‚ æœç´¢å·¥å…·    â”‚ â”‚ è®¡ç®—å·¥å…·    â”‚ â”‚ å®‰å…¨éªŒè¯    â”‚ â”‚  â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â”‚                       â”‚                                 â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
    â”‚  â”‚            æ—¥å¿—ç³»ç»Ÿ + é”™è¯¯å¤„ç† + å†å²è®°å½•           â”‚  â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    LLMæœåŠ¡                                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    """)


def main():
    """ä¸»å‡½æ•°"""
    print("ğŸ¯ ReActå®ç°æ”¹è¿›æ¼”ç¤º")
    print("=" * 80)

    # æ˜¾ç¤ºæ”¹è¿›ç‚¹
    show_improvements()

    # æ¶æ„å¯¹æ¯”
    architecture_comparison()

    # å®é™…å¯¹æ¯”æ¼”ç¤º
    compare_versions()

    print("\nâœ¨ æ¼”ç¤ºå®Œæˆï¼")
    print("\nå»ºè®®:")
    print("1. å¯¹äºå­¦ä¹ : ä» simple_react.py å¼€å§‹")
    print("2. å¯¹äºé¡¹ç›®: ä½¿ç”¨ improved_react.py")
    print("3. æŸ¥çœ‹ README.md äº†è§£è¯¦ç»†æ”¹è¿›è¯´æ˜")


if __name__ == "__main__":
    main()