# ADR-003: 零运行时依赖策略

## 状态

ACCEPTED

## 日期

2026-02-17

## 上下文

作为学习/实验用途的模块，需要决定是否引入第三方运行时依赖（如日志库 pino、工具库 lodash 等）。

## 决策

运行时零第三方依赖，仅使用 Node.js 标准库（fs/promises、path）。所有开发工具（TypeScript、Vitest、ESLint 等）仅作为 devDependency。

## 理由

本模块功能单一（文件写入 + 消息替换），Node.js 标准库完全满足需求。引入第三方库会增加不必要的复杂度，不利于学习理解。

### 备选方案

| 方案 | 优势 | 劣势 |
|------|------|------|
| 引入 pino（日志）| 结构化日志 | 学习项目不需要生产级日志 |
| 引入 lodash（工具）| 丰富的工具函数 | 项目仅需简单对象操作 |
| **零依赖** | 简洁、无供应链风险、易理解 | 需手写少量工具代码 |

## 后果

### 正面影响

- 安装快、无供应链安全风险
- 代码完全自包含，易于阅读和理解
- 无版本兼容性问题

### 负面影响

- 日志使用 console（学习项目可接受）

### 对测试的影响

- 测试无需 mock 第三方库，降低测试复杂度
